buildscript {
	ext {
		springBootVersion = "1.5.6.RELEASE"
		springCloudNetflixVersion = "1.3.2.RELEASE"
		springDependencyManagementVersion = "1.0.0.RELEASE"
		lombokVersion = "1.16.16"
		springfoxSwaggerVersion = "2.7.0"
		cucumberVersion = "1.2.5"
	}
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
		classpath "io.spring.gradle:dependency-management-plugin:{springDependencyManagementVersion}"
	}
}

def coreLibs = [
	"org.springframework.boot:spring-boot-starter-integration",
	"org.springframework.boot:spring-boot-starter-amqp",
	"org.springframework.integration:spring-integration-amqp",
	"org.springframework.integration:spring-integration-mongodb",
	"org.springframework.integration:spring-integration-java-dsl",
	"org.springframework.cloud:spring-cloud-config-client"
]
def gatewayLibs = [
	"org.springframework.boot:spring-boot-starter-web",
	"org.springframework.boot:spring-boot-starter-integration",
	"org.springframework.boot:spring-boot-starter-amqp",
	"org.springframework.boot:spring-boot-starter-actuator",
	"org.springframework.integration:spring-integration-amqp",
	"org.springframework.cloud:spring-cloud-config-client",
	"org.springframework.cloud:spring-cloud-starter-eureka",
	"org.springframework.cloud:spring-cloud-starter-feign",
	"io.springfox:springfox-swagger2:${springfoxSwaggerVersion}",
	"io.springfox:springfox-swagger-ui:${springfoxSwaggerVersion}"
]
def testLibs = [
	"org.springframework.boot:spring-boot-starter-test"
]

subprojects {
	apply plugin: "java"
	apply plugin: "org.springframework.boot"
	apply plugin: "eclipse"
	apply plugin: "idea"
	apply plugin: "io.spring.dependency-management"

	version = version
	group = "org.lab.insurance"

	compileJava {
			sourceCompatibility = 1.8
			targetCompatibility = 1.8
			options.encoding = "UTF-8"
	}
	repositories {
		mavenCentral()
	}

	dependencyManagement {
		imports {
			mavenBom "org.springframework.cloud:spring-cloud-netflix:${springCloudNetflixVersion}"
		}
	}

	dependencies {
		compile "org.projectlombok:lombok:${lombokVersion}"
	}
}

project(":insurance-domain") {
	dependencies {
		compile "org.springframework.boot:spring-boot-starter-data-mongodb"		
		compile "io.swagger:swagger-annotations:1.5.16"
		compile "com.fasterxml.jackson.core:jackson-annotations:2.9.0"
		compile "org.hibernate:hibernate-validator"
		testCompile testLibs
	}
	bootRepackage {
		enabled = false
	}
}

project(":insurance-common") {
	dependencies {
		compile project(":insurance-domain")
		compile "joda-time:joda-time:2.9.9"
		compile "commons-io:commons-io:2.5"
		compile "org.apache.commons:commons-lang3:3.6"
		compile "org.springframework.integration:spring-integration-amqp"
		testCompile testLibs
	}
	bootRepackage {
		enabled = false
	}
}

project(":insurance-cloud-config") {
	dependencies {
		compile "org.springframework.cloud:spring-cloud-config-server"
		compile "org.springframework.boot:spring-boot-starter-web"
		testCompile testLibs
	}
}

project(":insurance-eureka") {
	dependencies {
		compile "org.springframework.cloud:spring-cloud-starter-eureka-server"
		compile "org.springframework.cloud:spring-cloud-config-client"
	}
}

project(":insurance-asset-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}
project(":insurance-asset-gateway") {
	dependencies {
		compile project(":insurance-common")
		compile gatewayLibs
		compile "org.springframework.boot:spring-boot-starter-data-rest"
		testCompile testLibs
	}
}

project(":insurance-broker-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}

project(":insurance-contract-common-gateway") {
	dependencies {
		compile project(":insurance-common")
		compile gatewayLibs
	}
}

project(":insurance-contract-creation-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}

project(":insurance-contract-creation-gateway") {
	dependencies {
		compile project(":insurance-contract-creation-core")
		compile gatewayLibs
	}
}

project(":insurance-legal-entity-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}

project(":insurance-legal-entity-gateway") {
	dependencies {
		compile project(":insurance-common")
		compile gatewayLibs
	}
}

project(":insurance-order-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}

project(":insurance-order-gateway") {
	dependencies {
		compile project(":insurance-portfolio-core")
		compile gatewayLibs
		testCompile testLibs
	}
}

project(":insurance-portfolio-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}

project(":insurance-portfolio-gateway") {
	dependencies {
		compile project(":insurance-portfolio-core")
		compile gatewayLibs
		testCompile testLibs
	}
}

project(":insurance-stop-loss-core") {
	dependencies {
		compile project(":insurance-common")
		compile coreLibs
		testCompile testLibs
	}
}

project(":insurance-zuul") {
dependencies {
		compile "org.springframework.boot:spring-boot-starter"
		compile "org.springframework.boot:spring-boot-starter-web"
		compile "org.springframework.boot:spring-boot-starter-thymeleaf"
		compile "org.springframework.boot:spring-boot-starter-actuator"
		compile "org.springframework.cloud:spring-cloud-starter-zuul"
		compile "org.springframework.cloud:spring-cloud-config-client"
	}
}

project(":insurance-bdd") {
	dependencies {
		compile coreLibs
		compile gatewayLibs
		testCompile testLibs
		testCompile "info.cukes:cucumber-junit:${cucumberVersion}"
		testCompile "info.cukes:cucumber-java:${cucumberVersion}"
		testCompile "info.cukes:cucumber-spring:${cucumberVersion}"
		compile(project(":insurance-contract-creation-gateway")) {
			exclude group: "org.springframework.cloud"
		}
	}
	bootRepackage {
		enabled = false
	}
}

// deprecated projects --------------------------------------------------------

/*
project(":insurance-bootstrap") {
	bootRepackage {
		enabled = false
	}
}

project(":insurance-ms-common") {
	dependencies {
		compile project(":insurance-common")
		compile "org.springframework.boot:spring-boot-starter-web"
		compile "org.springframework.boot:spring-boot-starter-integration"
		compile "org.springframework.boot:spring-boot-starter-actuator"
		compile "org.springframework.boot:spring-boot-starter-amqp"
		compile "org.springframework.integration:spring-integration-amqp"
		compile "org.springframework.integration:spring-integration-mongodb"
		compile "org.springframework.integration:spring-integration-java-dsl"
		compile "org.springframework.cloud:spring-cloud-config-client"
		compile "org.springframework.cloud:spring-cloud-starter-eureka"
		compile "io.springfox:springfox-swagger-ui:${springfoxSwaggerVersion}"
		testCompile testLibs
	}
	bootRepackage {
		enabled = false
	}
}

project(":insurance-services") {
	dependencies {
		compile project(":insurance-common")
		compile group: 'org.apache.camel', name: 'camel-guice', version: '2.19.2'
		compileOnly "javax.servlet:javax.servlet-api:3.0.1"
		testCompile group: 'junit', name: 'junit', version: '4.12'
	}
	bootRepackage {
		enabled = false
	}
}

project(":insurance-engine-domain") {
	dependencies {
		compile project(":insurance-domain")
	}
	bootRepackage {
		enabled = false
	}
}

project(":insurance-engine") {
	dependencies {
		compile project(":insurance-services")
		compile project(":insurance-engine-domain")
		compile "org.apache.commons:commons-lang3:3.6"
	}
	bootRepackage {
		enabled = false
	}
}
*/